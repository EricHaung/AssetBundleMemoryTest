# åœ–ç‰‡è¨˜æ†¶é«”åˆ†é…å·®ç•°

ä»¥ä¸‹ç‚ºåŒä¸€å¼µåœ–ç‰‡åœ¨ **å£“ç¸®** èˆ‡ **æœªå£“ç¸®** ç‹€æ…‹ä¸‹çš„è¨˜æ†¶é«”åˆ†é…å·®ç•°ã€‚

---

## å£“ç¸®é
![å£“ç¸®éçš„åœ–ç‰‡ - Unity Profiler](img/compress_texture2d_unity.png)  
![å£“ç¸®éçš„åœ–ç‰‡ - ç´°ç¯€](img/texture_compress.png)

---

## æ²’å£“ç¸®é
![æ²’å£“ç¸®éçš„åœ–ç‰‡ - Unity Profiler](img/uncompress_texture2d_unity.png)  
![æ²’å£“ç¸®éçš„åœ–ç‰‡ - ç´°ç¯€](img/texture_uncompress.png)

---

**è§€å¯Ÿé‡é»**  
å·®ç•°ä¸»è¦å‡ºç¾åœ¨ **Graphics Size**ã€‚  
å…¶ä»–é¡å‹ï¼ˆNative Sizeã€Managed Sizeï¼‰å±¬æ–¼è²¼åœ–çš„ **Meta Data**ï¼Œå› æ­¤ä¸æœƒå› å£“ç¸®èˆ‡å¦è€Œæœ‰æ˜é¡¯å·®ç•°ã€‚

---

## å„é¡åˆ¥æ„ç¾©èªªæ˜
ä»¥ä¸‹çˆ²è©¢å•AIç°¡è¿°å„é¡åˆ¥ä»£è¡¨æ„ç¾©
### Native Size
- ä»£è¡¨ç‰©ä»¶åœ¨ Unity **C++ Engine (Native Heap)** ç«¯æ‰€ä½”ç”¨çš„è¨˜æ†¶é«”ã€‚  
- å° `Texture2D` è€Œè¨€ï¼Œé€™éƒ¨åˆ†å„²å­˜çš„æ˜¯ **çµæ§‹æè¿°è³‡æ–™**ï¼Œä¾‹å¦‚ï¼š
  - è²¼åœ–å¯¬é«˜
  - æ ¼å¼
  - Mipmap è³‡è¨Š
- é€šå¸¸ä¸å¤§ï¼ˆå¹¾ç™¾ Bytes ï½ å¹¾ KBï¼‰ã€‚

---

### Managed Size
- ä»£è¡¨ç‰©ä»¶åœ¨ **C# Managed Heap** ç«¯æ‰€ä½”ç”¨çš„å¤§å°ã€‚  
- åƒ…æ˜¯ C# ç«¯çš„ **Texture2D åŒ…è£ç‰©ä»¶**ï¼ˆreference/æŒ‡æ¨™ï¼‰ï¼Œä¸åŒ…å«åƒç´ è³‡æ–™ã€‚  
- é€šå¸¸éå¸¸å°ï¼ˆåå¹¾ Bytesï¼‰ã€‚

---

### Graphics Size
- ä»£è¡¨ **GPU è¨˜æ†¶é«” (VRAM)** æˆ– **Graphics Driver åˆ†é…å€å¡Š**å…§ï¼Œå­˜æ”¾å¯¦éš› **åƒç´ è³‡æ–™**çš„å¤§å°ã€‚  
- `Texture2D` çš„åƒç´  Buffer åœ¨é€™è£¡å­˜æ”¾ï¼Œé€šå¸¸æ˜¯ä¸»è¦çš„è¨˜æ†¶é«”æ¶ˆè€—ä¾†æºã€‚  
- ä¾‹å¦‚ï¼šæŸå¼µå£“ç¸®å¾Œçš„è²¼åœ–å¤§å°ç‚º **128 KB**ï¼Œå°±æ˜¯å®ƒåœ¨ GPU ç«¯çš„å¯¦éš›ä½”ç”¨é‡ã€‚

---

## AssetBundle ä½¿ç”¨æƒ…æ³

æœ¬æ¬¡æ¸¬è©¦è¨­è¨ˆäº†å…­ç¨®ä¸åŒæƒ…å¢ƒï¼š

1. **ç©ºå ´æ™¯**ï¼šä»€éº¼éƒ½æ²’æœ‰è¼‰å…¥  
2. **å–®ä¸€åœ–ç‰‡åŒ…**ï¼šè¼‰å…¥ä¸€å€‹åªåŒ…å«ä¸€å¼µåœ–ç‰‡ç´ æçš„ AssetBundleï¼Œä¸¦è¼‰å…¥å…¶ä¸­çš„è²¼åœ–  
3. **å…©å€‹å–®åœ–åŒ…**ï¼šè¼‰å…¥å…©å€‹åˆ†åˆ¥åªåŒ…å«ä¸€å¼µåœ–ç‰‡çš„ AssetBundleï¼Œä¸¦è¼‰å…¥æ‰€æœ‰è²¼åœ–  
4. **ååœ–å¤§åŒ…**ï¼šè¼‰å…¥ä¸€å€‹åŒ…å« 10 å¼µåœ–ç‰‡ç´ æçš„ AssetBundleï¼Œä¸¦è¼‰å…¥æ‰€æœ‰è²¼åœ–  
5. **ååœ–å¤§åŒ… (å–®å¼µè¼‰å…¥)**ï¼šè¼‰å…¥ä¸€å€‹åŒ…å« 10 å¼µåœ–ç‰‡ç´ æçš„ AssetBundleï¼Œä½†åƒ…è¼‰å…¥å…¶ä¸­ä¸€å¼µè²¼åœ–  
6. **å…©å€‹å–®åœ–åŒ… (å–®å¼µè¼‰å…¥)**ï¼šè¼‰å…¥å…©å€‹åˆ†åˆ¥åªåŒ…å«ä¸€å¼µåœ–ç‰‡ç´ æçš„ AssetBundleï¼Œä½†åƒ…è¼‰å…¥å…¶ä¸­ä¸€å€‹ Bundle çš„è²¼åœ–  

---

## ğŸ” æª¢é©—çµæœèˆ‡è§€å¯Ÿ

è¼‰å…¥ AssetBundle å¾Œï¼Œè¨˜æ†¶é«”é…ç½®æœƒå‡ºç¾ä»¥ä¸‹è®ŠåŒ–ï¼š

5. **Managed / Managed Objects / AssetBundle**  
   - å‡ºç¾ **UnityEngine.AssetBundle** çš„ C# wrapper  
   - å¤§å°å›ºå®š **12 B**

1. **Native / UnitySystem / AssetBundle**  
   - å‡ºç¾ **LoadingCache**  
   - å¤§å°å›ºå®š **1 MB**

2. **Native / UnitySystem / SerializedFile**  
   - å‡ºç¾ **archive:CAB...** é–‹é ­çš„è¨˜æ†¶é«”å€å¡Š  
   - å¤§å° **ä¸å›ºå®š**

3. **Native / Native Objects / AssetBundle**  
   - å‡ºç¾å·²è¼‰å…¥çš„ **AssetBundle ç‰©ä»¶**  
   - å¤§å° **ä¸å›ºå®š**

4. **Native / Native Objects / (å°æ‡‰ç´ æé¡å‹)**  
   - è‹¥è¼‰å…¥åœ–ç‰‡ï¼Œæœƒå‡ºç¾ **Texture2D**  
   - å¤§å°å°æ‡‰æ–¼ **Native Size**ï¼ˆç´„ **440 B**ï¼‰

5. **Managed / Managed Objects / (å°æ‡‰ç´ æé¡å‹)**  
   - è‹¥è¼‰å…¥åœ–ç‰‡ï¼Œæœƒå‡ºç¾ **Texture2D** çš„ C# wrapper  
   - å¤§å°å°æ‡‰æ–¼ **Managed Size**ï¼ˆç´„ **12 B**ï¼‰

6. **Graphics**  
   - è‹¥è¼‰å…¥åœ–ç‰‡ï¼Œæœƒé¡å¤–å‡ºç¾ **Texture2D** çš„ GPU è¨˜æ†¶é«”ä½”ç”¨  
   - å¤§å°å°æ‡‰æ–¼ **Graphics Size**


# å„æƒ…å¢ƒä¸‹çš„è¨˜æ†¶é«”è®ŠåŒ–

| æ¸¬è©¦é¡åˆ¥               | AssetBundle | SerializedFile         | Native Texture2D | Managed Texture2D | Graphics Texture2D |
|------------------------|-------------|------------------------|------------------|-------------------|--------------------|
| ç©ºå ´æ™¯                 | 0 KB        | 0 KB                   | 0 B              | 0 B               | 0 KB               |
| å–®ä¸€åœ–ç‰‡åŒ…             | 4.5 KB      | 172.2 KB               | 440 B            | 12 B              | 128 KB             |
| å…©å€‹å–®åœ–åŒ…             | 9.0 KB      | 172.3 + 172.2 KB       | 440 B Ã— 2        | 12 B Ã— 2          | 128 KB Ã— 2         |
| ååœ–å¤§åŒ…               | 5.2 KB      | 171.0 KB               | 440 B Ã— 10       | 12 B Ã— 10         | 128 KB Ã— 10        |
| ååœ–å¤§åŒ… (å–®å¼µè¼‰å…¥)    | 5.2 KB      | 171.0 KB               | 440 B            | 12 B              | 128 KB             |
| å…©å€‹å–®åœ–åŒ… (å–®å¼µè¼‰å…¥)  | 9.0 KB      | 172.3 + 172.2 KB       | 440 B            | 12 B              | 128 KB             |

---

## ç¸½çµ

æ ¹æ“šè¡¨æ ¼è§€å¯Ÿï¼Œå¯å¾—å‡ºä»¥ä¸‹çµè«–ï¼š

1. **AssetBundle å¤§å°**  
   - èˆ‡åœ–ç‰‡æ•¸é‡ç„¡å¼·çƒˆç·šæ€§é—œä¿‚ã€‚  
   - å¤šåœ–åˆä½µåœ¨åŒä¸€å€‹ Bundle ä¸­ï¼ŒAssetBundle å ç”¨åè€Œæ›´å°ï¼ˆä¾‹ï¼š10 å¼µåœ–ç‰‡åªä½” 5.2 KBï¼‰ã€‚

2. **SerializedFile å ç”¨**  
   - æ¯å€‹ AssetBundle å°æ‡‰ä¸€å€‹ SerializedFileã€‚  
   - å³ä½¿åªè¼‰å…¥éƒ¨åˆ†åœ–ç‰‡ï¼ŒSerializedFile çš„å¤§å°ä»èˆ‡æ•´å€‹ AssetBundle ç¶å®šï¼Œä¸æœƒéš¨å¯¦éš›è¼‰å…¥æ•¸é‡ç¸®å°ã€‚

3. **Native / Managed Texture2D**  
   - åªæœƒéš¨å¯¦éš›è¼‰å…¥çš„åœ–ç‰‡æ•¸é‡è€Œè®ŠåŒ–ã€‚  
   - å–®å¼µåœ–ç‰‡å›ºå®š **440 B (Native)** + **12 B (Managed)**ã€‚

4. **Graphics Texture2D (VRAM)**  
   - åƒ…ä¾å¯¦éš›è¼‰å…¥çš„è²¼åœ–æ•¸é‡å¢åŠ ã€‚  
   - æ¯å¼µåœ–å›ºå®šä½”ç”¨ **128 KB**ã€‚  
   - å³ä½¿ AssetBundle å…§æœ‰å¤šå¼µåœ–ç‰‡ï¼Œæœªè¼‰å…¥çš„åœ–ç‰‡ä¸æœƒä½”ç”¨ GPU è¨˜æ†¶é«”ã€‚


# Prefab

## AssetBundle ä½¿ç”¨æƒ…æ³

æœ¬æ¬¡æ¸¬è©¦è¨­è¨ˆäº†å…­ç¨®ä¸åŒæƒ…å¢ƒï¼š

1. **ç©ºå ´æ™¯**ï¼šä»€éº¼éƒ½æ²’æœ‰è¼‰å…¥  
2. **ç©ºç¯€é»**ï¼šè¼‰å…¥ä¸€å€‹åªåŒ…å«ä¸€å€‹Prefabçš„ AssetBundleï¼Œè©²Prefabåªæœ‰ä¸€å€‹EmptyObjectï¼Œä¸¦è¼‰å…¥AssetBundleå…§æ‰€æœ‰Prefab  
3. **ä¸‰éšåœ“æ»¿äºŒå…ƒæ¨¹**ï¼šè¼‰å…¥ä¸€å€‹åªåŒ…å«ä¸€å€‹Prefabçš„ AssetBundleï¼Œè©²Prefabå‘ˆç¾ä¸‰éšåœ“æ»¿äºŒå…ƒæ¨¹çš„çµæ§‹ï¼Œæ¯ä¸€å€‹ç¯€é»éƒ½æ˜¯ç©ºç‰©ä»¶ï¼Œä¸¦è¼‰å…¥AssetBundleå…§æ‰€æœ‰Prefab  
4. **äº”éšåœ“æ»¿å››å…ƒæ¨¹**ï¼šè¼‰å…¥ä¸€å€‹åªåŒ…å«ä¸€å€‹Prefabçš„ AssetBundleï¼Œè©²Prefabå‘ˆç¾äº”éšåœ“æ»¿å››å…ƒæ¨¹çš„çµæ§‹ï¼Œæ¯ä¸€å€‹ç¯€é»éƒ½æ˜¯ç©ºç‰©ä»¶ï¼Œä¸¦è¼‰å…¥AssetBundleå…§æ‰€æœ‰Prefab   
5. **äº”éšåœ“æ»¿å››å…ƒæ¨¹å¤§åŒ…**ï¼šè¼‰å…¥ä¸€å€‹åŒ…å«å››å€‹Prefabçš„ AssetBundleï¼Œè©²Prefabå‘ˆç¾äº”éšåœ“æ»¿å››å…ƒæ¨¹çš„çµæ§‹ï¼Œæ¯ä¸€å€‹ç¯€é»éƒ½æ˜¯ç©ºç‰©ä»¶ï¼Œä¸¦è¼‰å…¥AssetBundleå…§æ‰€æœ‰Prefab  
6. **äº”éšåœ“æ»¿å››å…ƒæ¨¹ (å–®è¼‰å…¥)**ï¼šè¼‰å…¥ä¸€å€‹åŒ…å«å››å€‹Prefabçš„ AssetBundleï¼Œè©²Prefabå‘ˆç¾äº”éšåœ“æ»¿å››å…ƒæ¨¹çš„çµæ§‹ï¼Œæ¯ä¸€å€‹ç¯€é»éƒ½æ˜¯ç©ºç‰©ä»¶ï¼Œä½†åªè¼‰å…¥å…¶ä¸­ä¸€å€‹Prefab  
7. **ä¸‰éšåœ“æ»¿äºŒå…ƒæ¨¹ (å¸¶è…³æœ¬)**ï¼šè¼‰å…¥ä¸€å€‹åªåŒ…å«ä¸€å€‹Prefabçš„ AssetBundleï¼Œè©²Prefabå‘ˆç¾ä¸‰éšåœ“æ»¿äºŒå…ƒæ¨¹çš„çµæ§‹ï¼Œæ¯ä¸€å€‹ç¯€é»éƒ½æ˜¯ç©ºç‰©ä»¶+ä¸€å€‹åŸºç¤çš„MonoBehavior Classè…³æœ¬ï¼Œä¸¦è¼‰å…¥AssetBundleå…§æ‰€æœ‰Prefab  
8. **å…©å€‹å–®åœ–åŒ…**ï¼šè¼‰å…¥å…©å€‹åˆ†åˆ¥åªåŒ…å«ä¸€å€‹Prefabçš„ AssetBundleï¼Œè©²Prefabåªæœ‰ä¸€å€‹EmptyObjectï¼Œä¸¦è¼‰å…¥AssetBundleå…§æ‰€æœ‰Prefab  

---

## ğŸ” æª¢é©—çµæœèˆ‡è§€å¯Ÿ

è¼‰å…¥ AssetBundle å¾Œï¼Œè¨˜æ†¶é«”é…ç½®æœƒå‡ºç¾ä»¥ä¸‹è®ŠåŒ–ï¼š

5. **Managed / Managed Objects / AssetBundle**  
   - å‡ºç¾ **UnityEngine.AssetBundle** çš„ C# wrapper  
   - å¤§å°å›ºå®š **12 B**

1. **Native / UnitySystem / AssetBundle**  
   - å‡ºç¾ **LoadingCache**  
   - å¤§å°å›ºå®š **1 MB**

2. **Native / UnitySystem / SerializedFile**  
   - å‡ºç¾ **archive:CAB...** é–‹é ­çš„è¨˜æ†¶é«”å€å¡Š  
   - å¤§å° **ä¸å›ºå®š**

3. **Native / Native Objects / AssetBundle**  
   - å‡ºç¾å·²è¼‰å…¥çš„ **AssetBundle ç‰©ä»¶**  
   - å¤§å° **ä¸å›ºå®š**

4. **Native / Native Objects / (å°æ‡‰ç´ æé¡å‹)**  
   - è‹¥è¼‰å…¥åœ–ç‰‡ï¼Œæœƒå‡ºç¾ **Texture2D**  
   - å¤§å°å°æ‡‰æ–¼ **Native Size**ï¼ˆç´„ **440 B**ï¼‰

5. **Managed / Managed Objects / (å°æ‡‰ç´ æé¡å‹)**  
   - è‹¥è¼‰å…¥åœ–ç‰‡ï¼Œæœƒå‡ºç¾ **Texture2D** çš„ C# wrapper  
   - å¤§å°å°æ‡‰æ–¼ **Managed Size**ï¼ˆç´„ **12 B**ï¼‰

6. **Graphics**  
   - è‹¥è¼‰å…¥åœ–ç‰‡ï¼Œæœƒé¡å¤–å‡ºç¾ **Texture2D** çš„ GPU è¨˜æ†¶é«”ä½”ç”¨  
   - å¤§å°å°æ‡‰æ–¼ **Graphics Size**


# å„æƒ…å¢ƒä¸‹çš„è¨˜æ†¶é«”è®ŠåŒ–

| æ¸¬è©¦é¡åˆ¥               | AssetBundle | SerializedFile         | Native Texture2D | Managed Texture2D | Graphics Texture2D |
|------------------------|-------------|------------------------|------------------|-------------------|--------------------|
| ç©ºå ´æ™¯                 | 0 KB        | 0 KB                   | 0 B              | 0 B               | 0 KB               |
| å–®ä¸€åœ–ç‰‡åŒ…             | 4.5 KB      | 172.2 KB               | 440 B            | 12 B              | 128 KB             |
| å…©å€‹å–®åœ–åŒ…             | 9.0 KB      | 172.3 + 172.2 KB       | 440 B Ã— 2        | 12 B Ã— 2          | 128 KB Ã— 2         |
| ååœ–å¤§åŒ…               | 5.2 KB      | 171.0 KB               | 440 B Ã— 10       | 12 B Ã— 10         | 128 KB Ã— 10        |
| ååœ–å¤§åŒ… (å–®å¼µè¼‰å…¥)    | 5.2 KB      | 171.0 KB               | 440 B            | 12 B              | 128 KB             |
| å…©å€‹å–®åœ–åŒ… (å–®å¼µè¼‰å…¥)  | 9.0 KB      | 172.3 + 172.2 KB       | 440 B            | 12 B              | 128 KB             |

---

## ç¸½çµ

æ ¹æ“šè¡¨æ ¼è§€å¯Ÿï¼Œå¯å¾—å‡ºä»¥ä¸‹çµè«–ï¼š

1. **AssetBundle å¤§å°**  
   - èˆ‡åœ–ç‰‡æ•¸é‡ç„¡å¼·çƒˆç·šæ€§é—œä¿‚ã€‚  
   - å¤šåœ–åˆä½µåœ¨åŒä¸€å€‹ Bundle ä¸­ï¼ŒAssetBundle å ç”¨åè€Œæ›´å°ï¼ˆä¾‹ï¼š10 å¼µåœ–ç‰‡åªä½” 5.2 KBï¼‰ã€‚

2. **SerializedFile å ç”¨**  
   - æ¯å€‹ AssetBundle å°æ‡‰ä¸€å€‹ SerializedFileã€‚  
   - å³ä½¿åªè¼‰å…¥éƒ¨åˆ†åœ–ç‰‡ï¼ŒSerializedFile çš„å¤§å°ä»èˆ‡æ•´å€‹ AssetBundle ç¶å®šï¼Œä¸æœƒéš¨å¯¦éš›è¼‰å…¥æ•¸é‡ç¸®å°ã€‚

3. **Native / Managed Texture2D**  
   - åªæœƒéš¨å¯¦éš›è¼‰å…¥çš„åœ–ç‰‡æ•¸é‡è€Œè®ŠåŒ–ã€‚  
   - å–®å¼µåœ–ç‰‡å›ºå®š **440 B (Native)** + **12 B (Managed)**ã€‚

4. **Graphics Texture2D (VRAM)**  
   - åƒ…ä¾å¯¦éš›è¼‰å…¥çš„è²¼åœ–æ•¸é‡å¢åŠ ã€‚  
   - æ¯å¼µåœ–å›ºå®šä½”ç”¨ **128 KB**ã€‚  
   - å³ä½¿ AssetBundle å…§æœ‰å¤šå¼µåœ–ç‰‡ï¼Œæœªè¼‰å…¥çš„åœ–ç‰‡ä¸æœƒä½”ç”¨ GPU è¨˜æ†¶é«”ã€‚


